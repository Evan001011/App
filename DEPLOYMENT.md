# Deployment Guide

This app can be deployed directly from your GitHub repository to several platforms. All support automatic deployments on every push to `main`.

## üöÄ Quick Deploy Options

### Railway (Recommended) ‚≠ê

**Why Railway:**
- Perfect for Express.js apps
- Built-in PostgreSQL database
- Automatic HTTPS
- Free $5/month credit (plenty for student projects)

**Steps:**
1. Push your code to GitHub
2. Go to [Railway](https://railway.app)
3. Click "New Project" ‚Üí "Deploy from GitHub repo"
4. Select your repository
5. Railway auto-detects your setup (uses `railway.json`)
6. Click "Add Database" ‚Üí "PostgreSQL"
7. Add environment variables:
   - `GEMINI_API_KEY` - Your Google Gemini API key
   - `SESSION_SECRET` - Auto-generated by Railway
8. Click "Deploy"

Railway automatically sets `DATABASE_URL` from the PostgreSQL service.

**After deployment:**
```bash
# Run database migrations
railway run npm run db:push
```

---

### Render

**Why Render:**
- Free tier available
- PostgreSQL database included
- Easy GitHub integration
- Auto SSL certificates

**Steps:**
1. Push your code to GitHub
2. Go to [Render](https://render.com)
3. Click "New" ‚Üí "Blueprint"
4. Connect your GitHub repository
5. Render uses `render.yaml` for configuration
6. Add your `GEMINI_API_KEY` in the dashboard
7. Click "Deploy"

Render automatically creates the database and sets environment variables.

---

### Fly.io

**Why Fly.io:**
- Free tier includes 3 small VMs
- Global deployment
- PostgreSQL included

**Setup:**
1. Install Fly CLI:
   ```bash
   curl -L https://fly.io/install.sh | sh
   ```

2. Login and launch:
   ```bash
   fly auth login
   fly launch
   ```

3. Create PostgreSQL database:
   ```bash
   fly postgres create
   fly postgres attach <db-name>
   ```

4. Set secrets:
   ```bash
   fly secrets set GEMINI_API_KEY=your_key
   fly secrets set SESSION_SECRET=$(openssl rand -hex 32)
   ```

5. Deploy:
   ```bash
   fly deploy
   ```

---

### Vercel (Serverless Adaptation)

‚ö†Ô∏è **Note:** Vercel is designed for serverless, not traditional Express apps. Your current setup works best on Railway/Render/Fly.io. 

If you want to use Vercel, you'd need to:
1. Convert Express routes to Vercel serverless functions
2. Use Vercel Postgres or external database
3. Restructure the app significantly

**Not recommended for this project** - stick with Railway or Render.

---

## üîß Post-Deployment Checklist

After deploying to any platform:

1. **Run database migrations:**
   ```bash
   npm run db:push
   ```

2. **Verify environment variables:**
   - ‚úÖ `DATABASE_URL` (auto-set by most platforms)
   - ‚úÖ `GEMINI_API_KEY` (add manually)
   - ‚úÖ `SESSION_SECRET` (auto-generated or add manually)

3. **Test the deployment:**
   - Visit your app URL
   - Create a calendar event
   - Add a task
   - Test the AI chat

4. **Optional: Add custom domain**
   - Most platforms support custom domains on free tier
   - Add DNS records as instructed by the platform

---

## üÜì Free Tier Limits

| Platform | Free Tier | Database | Auto-deploy |
|----------|-----------|----------|-------------|
| **Railway** | $5/month credit | PostgreSQL included | ‚úÖ |
| **Render** | 750 hours/month | PostgreSQL 1GB | ‚úÖ |
| **Fly.io** | 3 VMs + 3GB storage | PostgreSQL included | ‚úÖ |
| **Replit** | Always-on with Core | PostgreSQL included | ‚úÖ |

---

## üîÑ Automatic Deployments

All platforms support automatic deployments:

1. Push code to GitHub:
   ```bash
   git add .
   git commit -m "Update feature"
   git push origin main
   ```

2. Platform detects the push and deploys automatically

3. Wait 1-3 minutes for build to complete

4. Your app is live with the latest changes!

---

## üêõ Troubleshooting

### Build fails
- Check build logs in the platform dashboard
- Verify `package.json` scripts are correct
- Ensure all dependencies are in `dependencies`, not `devDependencies`

### Database connection fails
- Verify `DATABASE_URL` is set correctly
- Run `npm run db:push` to sync schema
- Check database is created and accessible

### App crashes on startup
- Check logs: `railway logs` or platform dashboard
- Verify environment variables are set
- Ensure `npm start` command works locally

### AI responses fail
- Verify `GEMINI_API_KEY` is set correctly
- Check API key is valid at https://ai.google.dev/
- Review server logs for specific error messages

---

## üìä Cost Comparison

For a student productivity app with moderate usage:

- **Railway**: FREE (within $5/month credit)
- **Render**: FREE (within 750 hours + 1GB DB)
- **Fly.io**: FREE (within 3 VMs limit)
- **Replit**: FREE or $20/month for always-on

**Recommendation:** Start with Railway or Render's free tier. Upgrade only if you need more resources.
